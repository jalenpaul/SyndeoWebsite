<!DOCTYPE html>
<meta charset="UTF-8">
<html>

<head>
    <link rel="styleSheet" type="text/css" href="/SyndeoWebsite/CSS/MainStyles.css">
    <link rel="styleSheet" type="text/css" href="/SyndeoWebsite/CSS/LoginOrSignUpStyles.css">
    <title>Login or Sign Up</title>
</head>

<body>
    <article id="article_lOSU">
        <h1 id="h1_lOSU">Sign Up</h1>
        <div id="div_lOSU_PFP">
            <img id="img_lOSU_pfp" src="/SyndeoWebsite/Res/PNGs/img_syndeo_pfp.png">
            <section id="section_lOSU_pfp">

                <div id="div_lOSU_addPFP">
                    <button id="b_lOSU_addPFP"><a id="a_lOSU_addPFP" href="javascript: void(0)">+</a></button>
                    <input id="input_lOSU_addPFP" onchange="addPFP(this)" type="file" name="upload" accept=".png, .jpg, .jpeg" />
                </div>

                <button id="b_lOSU_resetPFP" onclick="resetPFP()">â¥€</button>
            </section>
        </div>
        <form id="form_lOSU" onsubmit="return submit()">
            <input id="input_lOSU_username" type="text" placeholder="username">
            <input id="input_lOSU_identifier" placeholder="email" type="text">
            <input id="input_lOSU_password" type="password" placeholder="password">
            <input id="input_lOSU_submit" value="Submit" type="submit">
        </form>
        <button id="b_lOSU_changeForm" onclick="changeFormClick()">Login</button>
    </article>
    <script type="module">
        import { initializeApp } from "/firebase/app"; import { getAuth, createUserWithEmailAndPassword } from "/firebase/auth"; const firebaseConfig = { apiKey: "AIzaSyDxlbYh0_dLHI9GKBZNn5WH1CgxS1Rty_U", authDomain: "syndeo-3d845.firebaseapp.com", projectId:
        "syndeo-3d845", storageBucket: "syndeo-3d845.appspot.com", messagingSenderId: "234917383806", appId: "1:234917383806:web:aef8228f84731a1923522f", measurementId: "G-JY4ZBZEE1Y" }; const app = initializeApp(firebaseConfig); const auth = getAuth(app);
    </script>
    <script>
        var imgPFP = document.getElementById("img_lOSU_pfp");

        var inputUsername = document.getElementById("input_lOSU_username");
        var inputIdentifier = document.getElementById("input_lOSU_identifier");
        var inputPassword = document.getElementById("input_lOSU_password");
        var inputSubmit = document.getElementById("input_lOSU_submit");



        function addPFP(input) {
            if (input.files && input.files[0]) {
                var reader = new FileReader();
                reader.onload = function(e) {
                    imgPFP.src = reader.result;
                }
                reader.readAsDataURL(input.files[0]);
            }
        }



        function resetPFP() {
            imgPFP.src = "/SyndeoWebsite/Res/PNGs/img_syndeo_pfp.png";
        }



        function submit() {
            alert("working");
            const username = inputUsername.value.trim();
            const email = inputIdentifier.value.trim();
            const password = inputPassword.value.trim();

            if (username.length == 0 ||
                email.length == 0 ||
                password.length == 0) {
                alert("Please fill out every box");
                return false;

            } else if (!validateEmail(email)) {
                alert("Email invalid");
                return false;

            } else if (username.length < 3 || username.length > 15) {
                alert("Username length must be 3-15");
                return false

            } else if (password.length < 8 || password.length > 25) {
                alert("Password length must be 8-25");
                return false;

            } else {
                const auth = getAuth();
                createUserWithEmailAndPassword(auth, email, password).then(
                    (userCredential) => {
                        const user = userCredential.user;
                        if (user != null) {}
                    }
                ).catch((error) => {
                    const errorCode = error.code;
                    const errorMessage = error.message;
                    alert(errorMessage);
                });
                return true;
            }
        }



        const validateEmail = (email) => {
            return String(email)
                .toLowerCase()
                .match(
                    /^(([^<>()[\]\\.,;:\s@"]+(\.[^<>()[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/
                );
        };
    </script>
</body>

</html>